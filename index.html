<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChemLab: Inorganic Analysis</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes pulse-slow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        .animate-pulse-slow {
            animation: pulse-slow 3s infinite;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // --- ICONS ---
        
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const FlaskConical = (props) => (
            <IconBase {...props}><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2" /><path d="M8.5 2h7" /><path d="M7 16h10" /></IconBase>
        );
        const CheckCircle2 = (props) => (
            <IconBase {...props}><circle cx="12" cy="12" r="10" /><path d="m9 12 2 2 4-4" /></IconBase>
        );
        const XCircle = (props) => (
            <IconBase {...props}><circle cx="12" cy="12" r="10" /><path d="m15 9-6 6" /><path d="m9 9 6 6" /></IconBase>
        );
        const ArrowRight = (props) => (
            <IconBase {...props}><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></IconBase>
        );
        const ArrowLeft = (props) => (
            <IconBase {...props}><path d="m12 19-7-7 7-7" /><path d="M19 12H5" /></IconBase>
        );
        const RefreshCw = (props) => (
            <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" /><path d="M21 3v5h-5" /><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" /><path d="M8 16H3v5" /></IconBase>
        );
        const FileText = (props) => (
            <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><line x1="10" y1="9" x2="8" y2="9" /></IconBase>
        );
        const Eye = (props) => (
            <IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" /><circle cx="12" cy="12" r="3" /></IconBase>
        );
        const PenTool = (props) => (
            <IconBase {...props}><path d="m12 19 7-7 3 3-7 7-3-3z" /><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" /><path d="m2 2 7.586 7.586" /><circle cx="11" cy="11" r="2" /></IconBase>
        );
        const Beaker = (props) => (
            <IconBase {...props}><path d="M4.5 3h15" /><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3" /><path d="M6 14h12" /></IconBase>
        );
        const Trophy = (props) => (
            <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6" /><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18" /><path d="M4 22h16" /><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22" /><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22" /><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z" /></IconBase>
        );
        const AlertTriangle = (props) => (
            <IconBase {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><line x1="12" y1="9" x2="12" y2="13" /><line x1="12" y1="17" x2="12.01" y2="17" /></IconBase>
        );
        const BookOpen = (props) => (
            <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" /><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" /></IconBase>
        );
        const RotateCcw = (props) => (
            <IconBase {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" /><path d="M3 3v5h5" /></IconBase>
        );

        // --- INORGANIC DATASETS & LOGIC ---

        const CATIONS = [
            { id: 'Cu2+', name: 'Copper(II) (Cu²⁺)', simpleName: 'Copper(II)', color: 'blue', solidColor: 'blue/green crystalline', flame: 'Bluish-green' },
            { id: 'Fe2+', name: 'Iron(II) (Fe²⁺)', simpleName: 'Iron(II)', color: 'pale green', solidColor: 'pale green crystalline', flame: 'No observable change' },
            { id: 'Fe3+', name: 'Iron(III) (Fe³⁺)', simpleName: 'Iron(III)', color: 'yellow/brown', solidColor: 'yellow/brown crystalline', flame: 'No observable change' },
            { id: 'Ca2+', name: 'Calcium (Ca²⁺)', simpleName: 'Calcium', color: 'colorless', solidColor: 'white crystalline', flame: 'Brick Red' },
            { id: 'Mg2+', name: 'Magnesium (Mg²⁺)', simpleName: 'Magnesium', color: 'colorless', solidColor: 'white crystalline', flame: 'No observable change' },
            { id: 'Al3+', name: 'Aluminium (Al³⁺)', simpleName: 'Aluminium', color: 'colorless', solidColor: 'white crystalline', flame: 'No observable change' },
            { id: 'Zn2+', name: 'Zinc (Zn²⁺)', simpleName: 'Zinc', color: 'colorless', solidColor: 'white crystalline', flame: 'No observable change' },
            { id: 'NH4+', name: 'Ammonium (NH₄⁺)', simpleName: 'Ammonium', color: 'colorless', solidColor: 'white crystalline', flame: 'No observable change' },
            { id: 'Na+', name: 'Sodium (Na⁺)', simpleName: 'Sodium', color: 'colorless', solidColor: 'white crystalline', flame: 'Golden Yellow' },
            { id: 'K+', name: 'Potassium (K⁺)', simpleName: 'Potassium', color: 'colorless', solidColor: 'white crystalline', flame: 'Lilac' },
        ];

        const ANIONS = [
            { id: 'Cl-', name: 'Chloride (Cl⁻)', simpleName: 'Chloride' },
            { id: 'Br-', name: 'Bromide (Br⁻)', simpleName: 'Bromide' },
            { id: 'I-', name: 'Iodide (I⁻)', simpleName: 'Iodide' },
            { id: 'SO4-2', name: 'Sulphate (SO₄²⁻)', simpleName: 'Sulphate' },
            // Nitrate Removed
            { id: 'CO3-2', name: 'Carbonate (CO₃²⁻)', simpleName: 'Carbonate' },
            { id: 'HCO3-', name: 'Hydrogencarbonate (HCO₃⁻)', simpleName: 'Hydrogencarbonate' },
            { id: 'SO3-2', name: 'Sulphite (SO₃²⁻)', simpleName: 'Sulphite' },
            { id: 'OCl-', name: 'Hypochlorite (OCl⁻)', simpleName: 'Hypochlorite' }, 
        ];

        const generateMysteryCompound = () => {
            let isValid = false;
            let c, a;
            
            let attempts = 0;
            while (!isValid && attempts < 500) {
                attempts++;
                c = CATIONS[Math.floor(Math.random() * CATIONS.length)];
                a = ANIONS[Math.floor(Math.random() * ANIONS.length)];
                
                // Solubility Rules
                // A. All K+, Na+, NH4+ are soluble
                if (['Na+', 'K+', 'NH4+'].includes(c.id)) isValid = true; 
                // B. HCO3- is soluble
                else if (a.id === 'HCO3-') isValid = true; 
                // C. Sulphates soluble except Ca, Pb, Ba (Ca in list)
                else if (a.id === 'SO4-2') isValid = c.id !== 'Ca2+'; 
                // D. Chlorides soluble except Ag, Pb (neither in list) -> check stability
                else if (['Cl-', 'Br-', 'I-'].includes(a.id)) { 
                    // Unstable redox pairs
                    if (c.id === 'Cu2+' && a.id === 'I-') isValid = false; 
                    else if (c.id === 'Fe3+' && a.id === 'I-') isValid = false; 
                    else isValid = true;
                }
                // E. Carbonates, Sulphites, Hydroxides insoluble except Group 1/NH4
                else if (['CO3-2', 'SO3-2'].includes(a.id)) isValid = false; 
                // OCl- generally soluble
                else if (a.id === 'OCl-') isValid = true;
            }
            return { cation: c, anion: a };
        };

        const getTestReport = (cation, anion) => {
            const cId = cation.id;
            const aId = anion.id;

            return [
                { test: 'Visual Inspection', obs: `The sample is a ${cation.solidColor} solid.` },
                { test: 'Solubility Test', obs: `Dissolves completely in distilled water to form a ${cation.color} solution.` },
                { 
                    test: 'Flame Test', 
                    obs: ['K+', 'Na+', 'Cu2+', 'Ca2+'].includes(cId) ? `Flame burns with a ${cation.flame} color.` : 'No observable change.' 
                },
                { 
                    test: 'Add dilute NaOH(aq)', 
                    obs: (() => {
                        if (cId === 'Cu2+') return 'Blue precipitate forms.';
                        if (cId === 'Fe2+') return 'Dirty green precipitate forms.';
                        if (cId === 'Fe3+') return 'Reddish-brown precipitate forms.';
                        if (['Ca2+', 'Mg2+', 'Al3+', 'Zn2+'].includes(cId)) return 'White precipitate forms.';
                        if (cId === 'NH4+') return 'No visible precipitate.';
                        return 'No visible precipitate.';
                    })()
                },
                {
                    test: 'Add excess NaOH(aq)',
                    obs: (() => {
                        if (['Zn2+', 'Al3+'].includes(cId)) return 'The white precipitate dissolves to form a colorless solution.';
                        if (['Ca2+', 'Mg2+', 'Cu2+', 'Fe2+', 'Fe3+'].includes(cId)) return 'The precipitate remains insoluble.';
                        if (cId === 'NH4+') return 'No precipitate forms. On warming, a pungent gas is evolved which turns wet pH paper blue.';
                        return 'No precipitate forms.';
                    })()
                },
                { 
                    test: 'Add dilute NH₃(aq)', 
                    obs: (() => {
                        if (cId === 'Cu2+') return 'Pale blue precipitate forms.';
                        if (cId === 'Fe2+') return 'Dirty green precipitate forms.';
                        if (cId === 'Fe3+') return 'Reddish-brown precipitate forms.';
                        if (['Zn2+', 'Mg2+', 'Al3+'].includes(cId)) return 'White precipitate forms.';
                        return 'No precipitate.';
                    })()
                },
                {
                    test: 'Add excess NH₃(aq)',
                    obs: cId === 'Cu2+' ? 'Precipitate dissolves to form a DEEP BLUE solution.' :
                        (cId === 'Zn2+' ? 'Precipitate dissolves to form a colorless solution.' :
                        (['Al3+', 'Mg2+', 'Fe2+', 'Fe3+'].includes(cId) ? 'Precipitate remains insoluble.' : 'N/A.'))
                },
                {
                    test: 'Add dilute HCl(aq)',
                    obs: (() => {
                        if (aId === 'CO3-2' || aId === 'HCO3-') return 'Vigorous effervescence. Colorless gas turns wet pH paper red.';
                        if (aId === 'SO3-2') return 'Effervescence. Pungent gas (burning sulphur smell) turns wet pH paper red.';
                        if (aId === 'OCl-') return 'Pungent gas evolved. Gas turns wet pH paper red, then bleaches it white.';
                        return 'No gas bubbles observed.';
                    })()
                },
                {
                    test: 'Add acidified BaCl₂(aq)',
                    obs: (() => {
                        if (aId === 'SO4-2') return 'White precipitate forms.';
                        if (['CO3-2', 'HCO3-', 'SO3-2'].includes(aId)) {
                            return `Effervescence (gas bubbles) due to acid. The solution is ${cation.color}.`;
                        }
                        return 'No precipitate forms.';
                    })()
                },
                {
                    test: 'Add acidified AgNO₃(aq)',
                    obs: (() => {
                        if (aId === 'Cl-') return 'White precipitate forms.';
                        if (aId === 'Br-') return 'Pale yellow precipitate forms.';
                        if (aId === 'I-') return 'Yellow precipitate forms.';
                        if (aId === 'OCl-') return 'White precipitate forms.';
                        if (['CO3-2', 'HCO3-', 'SO3-2'].includes(aId)) {
                            return `Effervescence (gas bubbles) due to acid. The solution is ${cation.color}.`;
                        }
                        return 'No precipitate forms.';
                    })()
                },
                {
                    test: 'Add Na₂SO₄(aq)',
                    obs: cId === 'Ca2+' ? 'White precipitate forms.' : 'No precipitate forms.'
                }
            ];
        };

        // --- APP COMPONENT ---

        const App = () => {
            const [view, setView] = useState('home'); // home, test
            const [mysterySalt, setMysterySalt] = useState(null);
            const [report, setReport] = useState([]);
            const [selectedCation, setSelectedCation] = useState('');
            const [selectedAnion, setSelectedAnion] = useState('');
            const [inorganicFeedback, setInorganicFeedback] = useState(null);
            const [notepad, setNotepad] = useState({});

            const startInorganic = () => {
                const salt = generateMysteryCompound();
                setMysterySalt(salt);
                setReport(getTestReport(salt.cation, salt.anion));
                setSelectedCation('');
                setSelectedAnion('');
                setInorganicFeedback(null);
                setNotepad({});
                setView('test');
            };

            const goHome = () => {
                setView('home');
            };

            const toggleNote = (id) => {
                setNotepad(prev => ({...prev, [id]: !prev[id]}));
            };

            const checkInorganic = () => {
                if (selectedCation === mysterySalt.cation.id && selectedAnion === mysterySalt.anion.id) {
                    setInorganicFeedback('correct');
                } else {
                    setInorganicFeedback('incorrect');
                }
            };

            const showInorganicAnswer = () => {
                setSelectedCation(mysterySalt.cation.id);
                setSelectedAnion(mysterySalt.anion.id);
                setInorganicFeedback('revealed');
            };

            // --- RENDERERS ---

            const renderHome = () => (
                <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-8 relative overflow-hidden">
                    {/* Decor background */}
                    <div className="absolute top-0 left-0 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse-slow"></div>
                    <div className="absolute bottom-0 right-0 w-64 h-64 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse-slow" style={{animationDelay: '1.5s'}}></div>

                    <div className="max-w-2xl w-full bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl border border-white p-10 text-center relative z-10">
                        <div className="flex justify-center mb-6">
                            <div className="p-4 bg-indigo-600 rounded-2xl shadow-lg text-white">
                                <FlaskConical size={48} strokeWidth={1.5} />
                            </div>
                        </div>
                        <h1 className="text-4xl md:text-5xl font-black text-slate-800 mb-4 tracking-tight">
                            ChemLab
                        </h1>
                        <p className="text-lg md:text-xl text-slate-600 mb-8 font-medium">
                            Inorganic Qualitative Analysis Trainer
                        </p>
                        
                        <div className="space-y-4">
                            <p className="text-slate-500 text-sm leading-relaxed max-w-md mx-auto">
                                Master the identification of cations and anions through simulated tests. 
                                Analyze precipitation reactions, flame tests, and gas evolution results to deduce the mystery salt.
                            </p>

                            <button 
                                onClick={startInorganic}
                                className="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-indigo-600 rounded-full hover:bg-indigo-700 hover:shadow-lg hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600"
                            >
                                <span>Start Experiment</span>
                                <ArrowRight className="ml-2 transition-transform group-hover:translate-x-1" />
                            </button>
                        </div>
                    </div>
                    
                    <div className="mt-12 text-slate-400 text-xs font-medium uppercase tracking-widest">
                        Based on HKDSE Chemistry Syllabus
                    </div>
                </div>
            );

            const renderTest = () => (
                <div className="min-h-screen bg-slate-100 flex flex-col pb-12">
                    <div className="bg-indigo-900 text-white p-4 shadow-lg sticky top-0 z-30">
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <div className="flex items-center gap-4">
                                <button onClick={goHome} className="p-2 hover:bg-indigo-800 rounded-lg transition-colors text-indigo-200 hover:text-white">
                                    <ArrowLeft size={24} />
                                </button>
                                <h2 className="font-bold text-lg">Inorganic Qualitative Analysis</h2>
                            </div>
                            <button onClick={startInorganic} className="bg-indigo-600 hover:bg-indigo-500 px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg transition-colors"><RefreshCw size={16} /> New Sample</button>
                        </div>
                    </div>
                    <div className="flex-grow p-4 md:p-6 max-w-6xl mx-auto w-full grid lg:grid-cols-3 gap-6">
                        
                        {/* --- LEFT COLUMN: LAB REPORT (RESULTS) --- */}
                        <div className="lg:col-span-2 space-y-4">
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                                <div className="bg-slate-50 p-4 border-b border-slate-200 flex items-center gap-3"><FileText className="text-indigo-600" /><h3 className="font-bold text-slate-800">Laboratory Report: Unknown Salt X</h3></div>
                                <div className="divide-y divide-slate-100">
                                    {report.map((row, idx) => (
                                        <div key={idx} className="p-4 hover:bg-slate-50 transition-colors grid md:grid-cols-4 gap-2">
                                            <div className="font-semibold text-slate-700 md:col-span-1 text-sm">{row.test}</div>
                                            <div className="text-slate-600 md:col-span-3 text-sm font-mono bg-slate-50 p-2 rounded border border-slate-100">{row.obs}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* --- RIGHT COLUMN: DEDUCTION NOTEPAD --- */}
                        <div className="space-y-4 h-full">
                            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-6 h-full">
                                <div className="flex items-center gap-2 mb-4 text-slate-700 font-bold uppercase tracking-wider text-sm">
                                    <PenTool size={18} /> Deduction Notepad
                                </div>
                                <p className="text-xs text-slate-400 mb-4">Click items to toggle possibilities on/off.</p>
                                <div className="grid grid-cols-1 gap-6">
                                    <div>
                                        <h4 className="text-xs font-bold text-slate-400 mb-2">CATIONS</h4>
                                        <div className="flex flex-wrap gap-2">
                                            {CATIONS.map(ion => (
                                                <button 
                                                    key={ion.id} 
                                                    onClick={() => toggleNote(ion.id)}
                                                    className={`px-3 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${
                                                        notepad[ion.id] 
                                                        ? 'bg-blue-500 border-blue-500 text-white shadow-md scale-105' 
                                                        : 'bg-slate-50 border-slate-200 text-slate-400 hover:border-blue-300'
                                                    }`}
                                                >
                                                    {ion.simpleName} {notepad[ion.id] && <CheckCircle2 className="inline w-3 h-3 ml-1"/>}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    <div>
                                        <h4 className="text-xs font-bold text-slate-400 mb-2">ANIONS</h4>
                                        <div className="flex flex-wrap gap-2">
                                            {ANIONS.map(ion => (
                                                <button 
                                                    key={ion.id} 
                                                    onClick={() => toggleNote(ion.id)}
                                                    className={`px-3 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${
                                                        notepad[ion.id] 
                                                        ? 'bg-indigo-500 border-indigo-500 text-white shadow-md scale-105' 
                                                        : 'bg-slate-50 border-slate-200 text-slate-400 hover:border-indigo-300'
                                                    }`}
                                                >
                                                    {ion.simpleName} {notepad[ion.id] && <CheckCircle2 className="inline w-3 h-3 ml-1"/>}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* --- BOTTOM ROW: FINAL ANSWER (Full Width) --- */}
                        <div className="lg:col-span-3 mt-4">
                            <div className="bg-white p-6 rounded-xl shadow-lg border-t-4 border-indigo-600">
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="font-bold text-xl text-slate-800">Analysis Result</h3>
                                    <p className="text-sm text-slate-500">Submit your final deduction.</p>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <div><label className="block text-xs font-bold text-indigo-900 uppercase mb-1">Cation</label><select value={selectedCation} onChange={(e) => setSelectedCation(e.target.value)} className="w-full p-3 bg-indigo-50 border-none rounded-lg text-indigo-900 font-bold focus:ring-2 focus:ring-indigo-500 outline-none"><option value="">Select Cation...</option>{CATIONS.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}</select></div>
                                    <div><label className="block text-xs font-bold text-indigo-900 uppercase mb-1">Anion</label><select value={selectedAnion} onChange={(e) => setSelectedAnion(e.target.value)} className="w-full p-3 bg-indigo-50 border-none rounded-lg text-indigo-900 font-bold focus:ring-2 focus:ring-indigo-500 outline-none"><option value="">Select Anion...</option>{ANIONS.map(a => <option key={a.id} value={a.id}>{a.name}</option>)}</select></div>
                                </div>
                                <div className="flex gap-2">
                                    <button onClick={showInorganicAnswer} className="flex-1 py-4 bg-white border-2 border-indigo-200 hover:bg-indigo-50 text-indigo-700 rounded-xl font-bold shadow-sm transition-all flex items-center justify-center gap-2"><Eye size={18} /> Show Answer</button>
                                    <button onClick={checkInorganic} disabled={!selectedCation || !selectedAnion || (inorganicFeedback === 'correct' || inorganicFeedback === 'revealed')} className="flex-1 py-4 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 disabled:text-slate-500 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 transition-all">Submit</button>
                                </div>
                                
                                {inorganicFeedback && (
                                    <div className={`mt-6 p-4 rounded-xl border-2 text-center animate-fade-in-up ${inorganicFeedback === 'correct' || inorganicFeedback === 'revealed' ? 'bg-emerald-50 border-emerald-100 text-emerald-800' : 'bg-red-50 border-red-100 text-red-800'}`}>
                                        {(inorganicFeedback === 'correct' || inorganicFeedback === 'revealed') ? (<><CheckCircle2 className="w-8 h-8 mx-auto mb-2 text-emerald-600" /><div className="font-bold text-lg">{inorganicFeedback === 'revealed' ? 'Answer Revealed' : 'Correct Analysis!'}</div><div className="text-sm mt-1 opacity-80">The compound is {CATIONS.find(c=>c.id===mysterySalt.cation.id).simpleName} {ANIONS.find(a=>a.id===mysterySalt.anion.id).simpleName}.</div></>) : (<><XCircle className="w-8 h-8 mx-auto mb-2 text-red-600" /><div className="font-bold text-lg">Incorrect.</div><div className="text-sm mt-1 opacity-80">Check the solubility, flame test, and reagent observations again.</div></>)}
                                    </div>
                                )}
                            </div>
                        </div>

                    </div>
                </div>
            );

            return view === 'home' ? renderHome() : renderTest();
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
